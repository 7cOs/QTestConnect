
<script type="text/javascript" src='./base.js'></script>
<script type="text/javascript" src='./daten.js'></script>
<script type="text/javascript" src='./stil.js'></script>
<script type="text/javascript" src='./veranstaltungen.js'></script>

<script type='text/javascript'>
	window.onload = function() {
		// - Initialize Process - //
		prozessInitialisieren();

		// - Add container - Observations - //
		ci.hinzufugen('cn').id = 'cnBeobachtungen';
		
		// - Create/add table of observation (actions) - //
		tabelleDerBeobachtungenHinzufügen(daten.ci.titel);
		
		// - Set style - //
		stilFestlegen(ci);
		
		// - Reveal - //
		ci.zeigen();
	};

	function prozessInitialisieren() {
		init();
		// - Set process title - //
		einstellenBeobachtungstitel(daten.ci.titel);
	}
	
	function einstellenBeobachtungstitel(titel) {
		doc.title = titel;
	}
	
	function tabelleDerBeobachtungenHinzufügen(titel) {
		var t = ci.q('cn').hinzufugen('table');
		ci.q( 'cn table' ).id = 'tblBeobachtungen';
		var c = t.hinzufugen('caption');
		c.htm( titel.replace('der', ' <br />der') );
		var h = t.hinzufugen('thead');
		// - Add actions container - //
		var akts = h.hinzufugen('tr');
		akts.hinzufugen('td').hinzufugen('quadrant');
		akts.q('td quadrant').id = 'quadCnAktionenSuche';
		var cn = akts.q('td quadrant').hinzufugen('cn');
		cn.id = 'cnAktionen';
		// - Add table header columns - //
		h.hinzufugen('tr').id = 'cnHeaderSpaltenfelder';
		for( var i in o = daten.dasReglement[0] ) {
			var c = h.q('#cnHeaderSpaltenfelder').hinzufugen('th');
			c.htm(i);
			c.title = daten.ubersetzen[i];
		}
		// - Add actions - //
		akts.q('tr td').colSpan = h.qs('#cnHeaderSpaltenfelder th').length;
		for(var i=0; i<(o = daten.ci.hauptAktionen).length; i++) {
			var akt = akts.q('#cnAktionen').hinzufugen('aktion');
			for(var j in o[i]) {
				if(o[i][j]=='cnSuche'){ continue; }
				j=='etikette' ? akt.htm( o[i][j] ) : akt.setAttribute(j, o[i][j]);
				j=='titel'? akt.title =  o[i][j] : null;
			}
			// - Set action events - //
			ereignisseFestlegen(akt);
		}
		// - Add search item - //
		akts.q('#cnAktionen').progen.hinzufugen('cn').id = daten.ci.suche.id;
		akts.q('#cnAktionen').progen.q('#' + daten.ci.suche.id );
		akts.progen.q('#cnSuche').hinzufugen('input');
		akts.progen.q('#cnSuche input').id = daten.ci.suche.eingang.id;
		akts.progen.q('#cnSuche #suche').placeholder =  daten.ci.suche.eingang.platzhalter;
		
		var b = t.hinzufugen('tbody');
	}
</script>